---
title: "Aula prática dia 1: Introdução ao ambiente R e boas práticas. Reprodutibilidade. Organização de projetos com R e R studio usando Git e Github."
author: "Tainá Rocha"
date: "2019/06/17 (updated: `r Sys.Date()`)"
output: 
  xaringan::moon_reader:
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "14:9" 

---
class: middle, left

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r xaringan-themer, include = FALSE}
library(xaringanthemer)
mono_light(
  base_color = "#23395b", white_color = "white",
  header_font_google = google_font("Source Sans Pro"),
  text_font_google   = google_font("Source Sans Pro", "300", "300i"),
  code_font_google   = google_font("Ubuntu Mono"), text_font_size = "20px"
)
```

# Linguagem R 

Linguagem de programação de código aberto voltada principalmente para realização de análises estatísticas e construção de gráficos.

Alguns links com material sobre R :

- https://github.com/beatrizmilz/materiais_estudo_R

- http://www.lampada.uerj.br/arquivosdb/_book2/introducao.html#o-que-%C3%A9-o-r

- https://blog.curso-r.com/


---

# Linguagem R 

.pull-left[

### Vantagens 

- Open Source  

- Variedade de pacotes (Mais de 20 mil pacotes à nossa disposição e assim não precisamos "reiventar a roda")

- Reprodutibilidade 

- Comunidade forte e colaborativa (Muito material disponível)
]

.pull-right[

### Desvantagens

- Curva de aprendizado mais demorada  

- Gerenciamento de memória e velocidade ainda são alguns desafios comparados a outras linguagens de programação

]

---
# Git 

É o sistema de controle de versões mais usado. Ele registra todas as alterações, e cira assim um histórico dessas alterações. Isso pode ser feito com quses todos os tipos de arquivos(.txt, .csv etc...), inclusive arquivos .R <br>
<br>

# Github 

GitHub é um serviço baseado em nuvem que hospeda os arquivos que usam Git como controle de versão. Além de várias funcionalidaes (como criar webpages), ele permite que os usuários colaborem e façam mudanças em projetos compartilhados enquanto mantêm um registro detalhado do progresso do seu código.

--- 


---
### E qual relação dessas ferramehtas com Modelagem de Nicho ?
--

A populazição do uso da liguagem R, principalmente na ecologia e relativamente recente. Veja este gráfico de Lai et al 2019 do artigo "Evaluating the popularity of R in ecology"

```{r, echo=FALSE, out.width="75%", fig.align='center'}
knitr::include_graphics("figs/R_ecology.jpg")
```

---
### E qual relação dessas ferramentas com a Modelagem de Nicho ?

No contexto dos  modelos de nicho ecológico e de distribuição potencial de espécies, existiam e existem outros tipos softwares (interface gráfica) para gerar tais modelos (openmodeler, modeco, maxent , diva gis). No entanto, é crescente a discussão que envolve a reprodutibilidade  das análises estatísticas em geral, e essa vem se tornando uma cobrança cada vez maior para análises de ENMs / SDMs também,  uma vez que estas podem envolver muitos passos (Referencias). É neste contexto que o uso de linguagem de programação, R principalmente, se tornou popular. O R possui um ecossistema que incentiva a reprodutibilidade, garantindo que qualquer resultado, da conta mais simples ao modelo mais complexo, possa ser reproduzido do começo ao fim. 

---
### E qual relação dessas ferramentas com a Modelagem de Nicho ?
Em outras palavras: Você pode fazer suas análises através de códigos com R, bem como fazer alterações nesses códigos, que ficam registrados por históricos de alteraçõe com Git, deixando tudo isso hospedado em nuvem no Github (onde outros usuários ainda podem contribuir para melhorar seu código). Usando essas ferramentas integradas e da maneira correta e uma boa prática que garante maior reprodutibilidade de suas análises.  

--- 
### Vamos ao que interessa!

Essa é uma discplina de teoria e prática de ENMs e SDMs, portanto o objetivo maior é entender a teoria e conseguir gerar seus modelos. Usaremos pacotes de R no Rstudio para gerar os modelos, no entanto, diante dos imprevistos que sempre podem ocorrer (seja por falta de familiaridade com R/Rstudio), os modelos poderão ser gerados por softwares mais simples (interface gráfica). 

---

### Um checklist de instalações.  

Pedimos a instalação do R, Rstudio e Qgis como pré-requisitos, uma vez que público de pós-graduação no geral já usa/usou essas ferramentas. Se não for o caso, nos links a seguir existem instruções para essas instalações:

1- Instalação do R: no link oficial **https://www.r-project.org/**  é possível encontrar as instruçoes de instalação de acordo com seu sistema operacional (Linux, Mac ou Windows)

Para os diferentes sistemas operacionais : **https://livro.curso-r.com/1-1-instalacao-do-r.html** 

Para windows : **http://www.des.ufscar.br/software-r**

Obs1.: No geral, instalação de R no windows requer a instalação do Rtools (https://cran.r-project.org/bin/windows/Rtools/)


2- R Studio para desktop: Após instalar o R, instale o Rstudio pelo link https://www.rstudio.com/products/rstudio/download/ (também de acordo com o sistema operacional do computador).

---
--- 

### Um checklist de instalações.  

Nos próximos passos avançaremos para para instalação de Git a criação de conta no Github

3- Instalação do git: Pelo link **https://git-scm.com/downloads** escolha a opção de download para seu sistema operacional e siga as instruções.

---
### Github

4- Crie sua conta no Github pelo link **https://github.com/**

```{r, echo=FALSE, out.width="45%", fig.align='center'}
knitr::include_graphics("figs/Github_conta.png")
```
---

### Github  

```{r, echo=FALSE, out.width="45%", fig.align='center'}
knitr::include_graphics("figs/Github_2.png")
```

---

### Configurações após a instalação. 

### Configuração Git. Para configurar seu Git existem duas possibilidades. 

## Pelo Terminal: 

1- No Rstudio procure pela aba **Terminal** ou abra seu próprio terminal (conhecido por Prompt no Windows).

2- Informe para o Git seu nome de usário (o mesmo do Github) e seu e-mail (o mesmo do Github). Todo comando de git no terminal começa por **git** .

``` git config --global user.name "Tai-Rocha" ```

``` git config --global user.email taina013@gmail.com ```

---

## Pelo pacote usethis :

1- Caso não tenha 

**install.packages("usethis")**

2- Em seguinda use a função **use_git_config**

**usethis::use_git_config(user.name = "Tai-Rocha",
                        user.email = "taina013@gmail.com")**


##### Agora git está configurado no computador e sabe quem é você.

---
## Configurando o Github com Rstudio. 
VOCÊ SÓ PRECISA FAZER ISTO UMA VEZ EM CADA COMPUTADOR. Vamos gera uma chave de segurança que identifica o computador e copiamos ela no GitHub. Esta chave é para cada computador individual. Você pode ter uma conta de GitHub e trabalhar em diferentes computadores, e cada um terá a própria chave.

1- No R studio, vá até **Global option...** (Opçoes globais) 
```{r, echo=FALSE, out.width="65%", fig.align='center'}
knitr::include_graphics("figs/global_options.jpg")
```
---

--- 
## Configurando o Github com Rstudio. 
2- NA opção  **Git/SVN** cheque se git está apontando para um arquivo **git.exe** em windows, em mac e linux **/usr/bin/git** ou **/usr/bin/gnome-terminal**  . Se você nunca fez isto, não deve ter nada no campo da chave RSA, clique Criar RSA Key (Create). O preenchimentos do campos que aparecem é opcional 

```{r, echo=FALSE, out.width="40%", fig.align='center'}
knitr::include_graphics("figs/Key_1.png")
```



---
## Configurando o Github com Rstudio. 
4- Em seguida clique em **View public key** destacado em azul. Copie a RSA Key. Ela é uma chave que identifica seu computador. 
```{r, echo=FALSE, out.width="45%", fig.align='center'}
knitr::include_graphics("figs/Key_2.png")
```
---

--- 
## Configurando o Github com Rstudio. 
5- Para copiar no GitHub, vá até o canto superior direito da sua página inicial do Perfil e selecione a opção **Settings**, em seguida vá na opção **SSH and GPG Keys** para colar e adicionar a chave. 

.pull-left[
```{r, echo=FALSE, out.width="35%", fig.align='left'}
knitr::include_graphics("figs/Seetings_Github.png")
```
]

.pull-right[
```{r, echo=FALSE, out.width="100%", fig.align='center'}
knitr::include_graphics("figs/Key_3.png")
```
]
---

#### Tudo configurado! Agora Git, github e seu computador podem se comunicar. O próximo passo é criar o repositório do projeto da disciplina. Vamos lá?

### Organizando fluxos de trabalho 

1-  No canto superior direito na sua conta do Github, clique no  **+** , em seguida em New repository

```{r, echo=FALSE, out.width="50%", fig.align='center'}
knitr::include_graphics("figs/Create_new_repo.png")
```

2- Nomei de forma informativa seu repositório, crie uma descrição igualmente informativa. Salecione a opção **Public** e opção **Add Readme** . Fialize clicando em **Create repository **

```{r, echo=FALSE, out.width="50%", fig.align='center'}
knitr::include_graphics("figs/repo_1.png")
```

---
### Organizando fluxos de trabalho 

3- Já no seu repositório , clique na opçãp **Code** e copie caminho HTTPS

```{r, echo=FALSE, out.width="100%", fig.align='center'}
knitr::include_graphics("figs/repo_to_rstudio.png")
```

